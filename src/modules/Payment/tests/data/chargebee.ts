import { Subscription } from "@nestjs/graphql"

export const getPaymentSucceededEvent = customerId => {
  const event = { ...PAYMENT_SUCCEEDED_TEMPLATE }
  event.transaction.customer_id = customerId
  event.invoice.customer_id = customerId
  event.customer.id = customerId
  event.subscription.customer_id = customerId

  return event
}

const PAYMENT_SUCCEEDED_TEMPLATE = {
  transaction: {
    id: "txn_16Aqc8SmXM4eV5V70",
    customer_id: "cktuy45cq7802542g3iokrgx9mj",
    subscription_id: "169lbNSjhwIUl6A5Q",
    gateway_account_id: "gw_JD8rbbrRhjNh0OZ05",
    payment_source_id: "pm_16COP6SjhwIR962Tv",
    payment_method: "apple_pay",
    gateway: "stripe",
    type: "payment",
    date: 1634873852,
    exchange_rate: 1,
    amount: 2000,
    id_at_gateway: "ch_3JnEZUKj0L34HDec0emzDP69",
    status: "success",
    updated_at: 1634873854,
    fraud_reason: "Payment complete.",
    resource_version: 1634873854350,
    deleted: false,
    object: "transaction",
    currency_code: "USD",
    base_currency_code: "USD",
    amount_unused: 0,
    linked_invoices: [
      {
        invoice_id: "7067",
        applied_amount: 2000,
        applied_at: 1634873854,
        invoice_date: 1634873850,
        invoice_total: 2000,
        invoice_status: "paid",
      },
    ],
    linked_refunds: [],
  },
  invoice: {
    id: "7067",
    customer_id: "cktuy45cq7802542g3iokrgx9mj",
    subscription_id: "169lbNSjhwIUl6A5Q",
    recurring: true,
    status: "paid",
    price_type: "tax_exclusive",
    date: 1634873850,
    due_date: 1634873850,
    net_term_days: 0,
    exchange_rate: 1,
    total: 2000,
    amount_paid: 2000,
    amount_adjusted: 0,
    write_off_amount: 0,
    credits_applied: 0,
    amount_due: 0,
    paid_at: 1634873852,
    updated_at: 1634873854,
    resource_version: 1634873854365,
    deleted: false,
    object: "invoice",
    first_invoice: false,
    amount_to_collect: 0,
    round_off_amount: 0,
    has_advance_charges: false,
    currency_code: "USD",
    base_currency_code: "USD",
    generated_at: 1634873850,
    is_gifted: false,
    term_finalized: true,
    channel: "web",
    tax: 0,
    line_items: [
      {
        id: "li_16Aqc8SmXM4Ub5V6P",
        date_from: 1634873850,
        date_to: 1637555850,
        unit_amount: 2000,
        quantity: 1,
        amount: 2000,
        pricing_model: "flat_fee",
        is_taxed: false,
        tax_amount: 0,
        object: "line_item",
        subscription_id: "169lbNSjhwIUl6A5Q",
        customer_id: "cktuy45cq7802542g3iokrgx9mj",
        description: "Access Monthly",
        entity_type: "plan",
        entity_id: "access-monthly",
        tax_exempt_reason: "export",
        discount_amount: 0,
        item_level_discount_amount: 0,
      },
    ],
    sub_total: 2000,
    linked_payments: [
      {
        txn_id: "txn_16Aqc8SmXM4eV5V70",
        applied_amount: 2000,
        applied_at: 1634873854,
        txn_status: "success",
        txn_date: 1634873852,
        txn_amount: 2000,
      },
    ],
    dunning_attempts: [],
    applied_credits: [],
    adjustment_credit_notes: [],
    issued_credit_notes: [],
    linked_orders: [],
    billing_address: {
      first_name: "Chris",
      last_name: "Quintana",
      line1: "104 El Paseo",
      city: "Foothill Ranch",
      state_code: "CA",
      state: "California",
      country: "US",
      zip: "92610",
      validation_status: "partially_valid",
      object: "billing_address",
    },
  },
  customer: {
    id: "cktuy45cq7802542g3iokrgx9mj",
    first_name: "Chris",
    last_name: "Quintana",
    email: "cquintana@ucdavis.edu",
    auto_collection: "on",
    net_term_days: 0,
    allow_direct_debit: false,
    created_at: 1632281849,
    taxability: "taxable",
    updated_at: 1632281850,
    pii_cleared: "active",
    channel: "web",
    resource_version: 1632281850149,
    deleted: false,
    object: "customer",
    billing_address: {
      first_name: "Chris",
      last_name: "Quintana",
      line1: "104 El Paseo",
      city: "Foothill Ranch",
      state_code: "CA",
      state: "California",
      country: "US",
      zip: "92610",
      validation_status: "partially_valid",
      object: "billing_address",
    },
    promotional_credits: 0,
    refundable_credits: 0,
    excess_payments: 0,
    unbilled_charges: 0,
    preferred_currency_code: "USD",
    primary_payment_source_id: "pm_16COP6SjhwIR962Tv",
    payment_method: {
      object: "payment_method",
      type: "apple_pay",
      reference_id: "cus_KGu5C1LAPYMt5J/card_1JcMGyKj0L34HDecuiawViET",
      gateway: "stripe",
      gateway_account_id: "gw_JD8rbbrRhjNh0OZ05",
      status: "valid",
    },
  },
  subscription: {
    id: "169lbNSjhwIUl6A5Q",
    plan_id: "access-monthly",
    plan_quantity: 1,
    plan_unit_price: 2000,
    billing_period: 1,
    billing_period_unit: "month",
    customer_id: "cktuy45cq7802542g3iokrgx9mj",
    plan_amount: 2000,
    plan_free_quantity: 0,
    status: "active",
    current_term_start: 1634873850,
    current_term_end: 1637555850,
    next_billing_at: 1637555850,
    created_at: 1632281850,
    started_at: 1632281850,
    activated_at: 1632281850,
    updated_at: 1634873854,
    has_scheduled_changes: false,
    channel: "web",
    resource_version: 1634873854404,
    deleted: false,
    object: "subscription",
    currency_code: "USD",
    due_invoices_count: 0,
    mrr: 2000,
    exchange_rate: 1,
    base_currency_code: "USD",
  },
}
